<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedido R√°pido - Drogaria Ultra Popular</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        input, select, textarea { font-size: 1rem; color: #374151; }
        select:invalid { color: gray; }
        ::placeholder { color: #9ca3af; opacity: 1; }
        :-ms-input-placeholder { color: #9ca3af; }
        ::-ms-input-placeholder { color: #9ca3af; }
        input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
            appearance: textfield;
        }
    </style>
</head>
<body class="bg-red-600 text-gray-100">

    <div class="container mx-auto p-4 md:p-8 max-w-3xl">
        <header class="text-center mb-8 py-4">
             <img src="img/LogoUltra.jpg" alt="Logo Drogaria Ultra Popular" class="mx-auto mb-4 h-24 md:h-32" onerror="this.style.display='none'">
             <p class="mt-2 text-lg">Monte seu pedido abaixo e envie pelo WhatsApp!</p>
        </header>

        <section class="mb-10 bg-white p-6 rounded-lg shadow-md text-gray-800">
            <h2 class="text-2xl font-bold mb-6 border-b border-gray-300 pb-3">Produtos Dispon√≠veis</h2>
            <div class="space-y-6">

                <div class="product-item flex flex-col sm:flex-row items-center border border-gray-200 rounded-md p-3 gap-4 bg-gray-50">
                    <img src="img/fraudaampers.jpg" alt="Fraldas Pampers Confort Sec" class="w-20 h-20 object-cover rounded flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/100x100/e2e8f0/4a5568?text=Img';">
                    <div class="flex-grow text-center sm:text-left">
                        <h3 class="font-semibold text-gray-700" data-product-name="Fraldas Pampers Confort Sec P. Eco">Fraldas Pampers Confort Sec P. Eco</h3>
                        <p class="text-green-600 font-bold text-lg" data-product-price="54.99">R$ 54,99</p>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center flex-shrink-0 mt-2 sm:mt-0 gap-3">
                        <div>
                            <label for="size-fralda01" class="sr-only">Tamanho:</label>
                            <select id="size-fralda01" name="size-fralda01" class="product-size border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500 bg-white h-10">
                                <option value="" disabled selected>Tamanho...</option>
                                <option value="P">P</option>
                                <option value="M">M</option>
                                <option value="G">G</option>
                                <option value="XG">XG</option>
                                <option value="XXG">XXG</option>
                            </select>
                        </div>
                        <div class="flex items-center">
                            <button type="button" class="quantity-minus p-2 border border-gray-300 rounded-l-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">-</button>
                            <input type="number" id="qty-fralda01" name="qty-fralda01" min="0" value="0"
                                   class="product-quantity w-12 border-t border-b border-gray-300 text-center focus:ring-red-500 focus:border-red-500 h-10 text-base"
                                   data-product-id="fralda01" readonly>
                            <button type="button" class="quantity-plus p-2 border border-gray-300 rounded-r-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">+</button>
                        </div>
                    </div>
                </div>

                <div class="product-item flex flex-col sm:flex-row items-center border border-gray-200 rounded-md p-3 gap-4 bg-gray-50">
                    <img src="img/Lencohuggies.jpg" alt="Len√ßos Umedecidos Huggies Max Clean 48 un" class="w-20 h-20 object-cover rounded flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/100x100/e2e8f0/4a5568?text=Img';">
                    <div class="flex-grow text-center sm:text-left">
                        <h3 class="font-semibold text-gray-700" data-product-name="Len√ßos Umedecidos Huggies Max Clean 48 un">Len√ßos Umedecidos Huggies Max Clean 48 un</h3>
                        <p class="text-green-600 font-bold text-lg" data-product-price="9.90">R$ 9,90</p>
                    </div>
                    <div class="flex items-center flex-shrink-0 mt-2 sm:mt-0">
                        <button type="button" class="quantity-minus p-2 border border-gray-300 rounded-l-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">-</button>
                        <input type="number" id="qty-lenco01" name="qty-lenco01" min="0" value="0"
                               class="product-quantity w-12 border-t border-b border-gray-300 text-center focus:ring-red-500 focus:border-red-500 h-10 text-base"
                               data-product-id="lenco01" readonly>
                        <button type="button" class="quantity-plus p-2 border border-gray-300 rounded-r-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">+</button>
                    </div>
                </div>

                 <div class="product-item flex flex-col sm:flex-row items-center border border-gray-200 rounded-md p-3 gap-4 bg-gray-50">
                    <img src="img/Leitninho.jpg" alt="Leite Ninho Fases 1+ Lata 800g" class="w-20 h-20 object-cover rounded flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/100x100/e2e8f0/4a5568?text=Img';">
                    <div class="flex-grow text-center sm:text-left">
                        <h3 class="font-semibold text-gray-700" data-product-name="Leite Ninho Fases 1+ Lata 800g">Leite Ninho Fases 1+ Lata 800g</h3>
                         <p class="text-sm text-gray-500 line-through">R$ 45,50</p>
                        <p class="text-green-600 font-bold text-lg" data-product-price="38.90">R$ 38,90</p>
                    </div>
                    <div class="flex items-center flex-shrink-0 mt-2 sm:mt-0">
                        <button type="button" class="quantity-minus p-2 border border-gray-300 rounded-l-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">-</button>
                        <input type="number" id="qty-leite01" name="qty-leite01" min="0" value="0"
                               class="product-quantity w-12 border-t border-b border-gray-300 text-center focus:ring-red-500 focus:border-red-500 h-10 text-base"
                               data-product-id="leite01" readonly>
                        <button type="button" class="quantity-plus p-2 border border-gray-300 rounded-r-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">+</button>
                    </div>
                </div>

                <div class="product-item flex flex-col sm:flex-row items-center border border-gray-200 rounded-md p-3 gap-4 bg-gray-50">
                     <img src="img/Dorflex,jpg.png" alt="Dorflex Caixa 10 comprimidos" class="w-20 h-20 object-cover rounded flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/100x100/e2e8f0/4a5568?text=Img';">
                    <div class="flex-grow text-center sm:text-left">
                        <h3 class="font-semibold text-gray-700" data-product-name="Dorflex Cx 10 comp">Dorflex Caixa 10 comprimidos</h3>
                        <p class="text-green-600 font-bold text-lg" data-product-price="5.50">R$ 5,50</p>
                    </div>
                    <div class="flex items-center flex-shrink-0 mt-2 sm:mt-0">
                        <button type="button" class="quantity-minus p-2 border border-gray-300 rounded-l-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">-</button>
                        <input type="number" id="qty-dorflex01" name="qty-dorflex01" min="0" value="0"
                               class="product-quantity w-12 border-t border-b border-gray-300 text-center focus:ring-red-500 focus:border-red-500 h-10 text-base"
                               data-product-id="dorflex01" readonly>
                        <button type="button" class="quantity-plus p-2 border border-gray-300 rounded-r-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">+</button>
                    </div>
                </div>

                <div class="product-item flex flex-col sm:flex-row items-center border border-gray-200 rounded-md p-3 gap-4 bg-gray-50">
                     <img src="img/Dipirona.jpg" alt="Dipirona S√≥dica Gotas 20ml Gen√©rico" class="w-20 h-20 object-cover rounded flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/100x100/e2e8f0/4a5568?text=Img';">
                    <div class="flex-grow text-center sm:text-left">
                        <h3 class="font-semibold text-gray-700" data-product-name="Dipirona S√≥dica Gotas 20ml Gen√©rico">Dipirona S√≥dica Gotas 20ml Gen√©rico</h3>
                        <p class="text-green-600 font-bold text-lg" data-product-price="4.80">R$ 4,80</p>
                    </div>
                    <div class="flex items-center flex-shrink-0 mt-2 sm:mt-0">
                        <button type="button" class="quantity-minus p-2 border border-gray-300 rounded-l-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">-</button>
                        <input type="number" id="qty-dipirona01" name="qty-dipirona01" min="0" value="0"
                               class="product-quantity w-12 border-t border-b border-gray-300 text-center focus:ring-red-500 focus:border-red-500 h-10 text-base"
                               data-product-id="dipirona01" readonly>
                        <button type="button" class="quantity-plus p-2 border border-gray-300 rounded-r-md bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 focus:ring-offset-gray-50 h-10 w-10 flex items-center justify-center text-lg font-bold text-gray-700">+</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-10 bg-white p-6 rounded-lg shadow-md text-gray-800">
             <h2 class="text-2xl font-bold mb-6 border-b border-gray-300 pb-3">Dados para Entrega e Pagamento</h2>
             <form id="customer-form" class="space-y-4">
                 <div>
                     <label for="customer-name" class="block text-sm font-medium text-gray-700 mb-1">Nome Completo *</label>
                     <input type="text" id="customer-name" name="customer-name" required class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500">
                 </div>
                 <div>
                     <label for="customer-phone" class="block text-sm font-medium text-gray-700 mb-1">Telefone / WhatsApp *</label>
                     <input type="tel" id="customer-phone" name="customer-phone" required placeholder="(XX) XXXXX-XXXX" class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500">
                 </div>
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-300 mt-6">
                     <div class="md:col-span-2">
                         <label for="customer-street" class="block text-sm font-medium text-gray-700 mb-1">Rua / Avenida *</label>
                         <input type="text" id="customer-street" name="customer-street" required class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500">
                     </div>
                     <div>
                         <label for="customer-number" class="block text-sm font-medium text-gray-700 mb-1">N√∫mero *</label>
                         <input type="text" id="customer-number" name="customer-number" required class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500">
                     </div>
                 </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <div>
                         <label for="customer-complement" class="block text-sm font-medium text-gray-700 mb-1">Complemento (Opcional)</label>
                         <input type="text" id="customer-complement" name="customer-complement" placeholder="Apto, Bloco, Casa" class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500">
                     </div>
                     <div>
                         <label for="customer-neighborhood" class="block text-sm font-medium text-gray-700 mb-1">Bairro *</label>
                         <input type="text" id="customer-neighborhood" name="customer-neighborhood" required class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500">
                     </div>
                 </div>
                 <div>
                     <label for="customer-reference" class="block text-sm font-medium text-gray-700 mb-1">Ponto de Refer√™ncia (Opcional)</label>
                     <input type="text" id="customer-reference" name="customer-reference" class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500">
                 </div>
                 <div class="pt-4 border-t border-gray-300 mt-6">
                    <label for="other-products" class="block text-sm font-medium text-gray-700 mb-1">
                        Quer incluir algum produto que n√£o est√° na lista? (Opcional)
                    </label>
                    <textarea id="other-products" name="other-products" rows="3"
                              class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500"
                              placeholder="Digite aqui nome e quantidade desejada, ex: 
2x Novalgina 1g cx 10 comp
1x Protetor Solar Sundown FPS 50"></textarea>
                     <p class="mt-1 text-xs text-gray-500">Obs: A disponibilidade e o pre√ßo destes itens ser√£o confirmados via WhatsApp.</p>
                </div>
                 <div class="pt-4 border-t border-gray-300 mt-6">
                    <label for="payment-method" class="block text-sm font-medium text-gray-700 mb-1">Forma de Pagamento *</label>
                    <select id="payment-method" name="payment-method" required class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500 bg-white">
                        <option value="" disabled selected>Selecione...</option>
                        <option value="Dinheiro">Dinheiro (informar se precisa de troco)</option>
                        <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito (maquininha)</option>
                        <option value="Cart√£o de D√©bito">Cart√£o de D√©bito (maquininha)</option>
                        <option value="PIX">PIX</option>
                    </select>
                </div>
                <div id="troco-section" class="hidden">
                     <label for="troco-para" class="block text-sm font-medium text-gray-700 mb-1">Precisa de troco para quanto? (Opcional)</label>
                    <input type="text" id="troco-para" name="troco-para" placeholder="Ex: R$ 50,00" class="w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-red-500 focus:border-red-500">
                </div>
             </form>
        </section>

        <section id="total-section" class="mt-8 mb-6 text-right bg-white p-4 rounded-lg shadow text-gray-800">
            <h3 class="text-xl font-semibold">Total do Pedido (Itens da Lista):</h3>
            <p id="total-pedido-valor" class="text-2xl font-bold text-green-600 mt-1">R$ 0,00</p>
            <p class="text-xs text-gray-500 mt-1">(+ itens adicionais, se houver. Valor sujeito a confirma√ß√£o e taxa de entrega, se aplic√°vel)</p>
        </section>

        <section class="text-center">
             <button type="button" onclick="enviarPedidoWhatsApp()" class="w-full md:w-auto inline-flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-lg text-center transition duration-300 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-700 focus:ring-offset-red-600">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" class="h-6 w-6"> <path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 .1c94.7 0 171.7 77 171.7 171.7 0 48.4-19.4 95.2-57.1 130.1l-3.6 3.7-37.1 21.9 24.3 59.1 58.5-15.4L380.1 403c35.5-39.5 56.2-89.9 56.2-143.4 0-110.9-89.9-200.9-200.1-200.9zm-52.4 146.1c-4.9-2.5-29.1-14.4-33.6-16.1s-7.9-2.5-11.3 2.5c-3.4 5-12.7 16.1-15.6 19.4s-5.9 3.7-11.3 1.2c-19.5-8.9-38.2-17.1-55.5-31.9-13.3-11.4-24.6-26.3-35.5-43.8-10.9-17.5-1.2-27.1.9-36.1c1.9-8.1 4.1-13.4 6.2-17.7s4.2-6.4 6.2-10.7c2-4.2.9-7.9-.4-10.4s-11.3-27.1-15.4-37.1c-4.1-10-8.3-8.6-11.3-8.6s-9.8-.1-14.4-.1c-4.6 0-12.1 1.2-18.4 6.2s-19.8 19.1-19.8 46.5c0 27.5 20.3 53.9 23.1 57.4s39.6 60.4 96.1 84.7c13.9 6 26.5 9.6 35.5 12.2 15.9 4.6 30.2 3.7 41.2 2.2 12.2-1.7 38.4-15.6 43.8-30.8s5.4-28.1 4.6-30.8c-.8-2.7-3.4-4.2-7.2-6.7z"/> </svg>
                 Enviar Pedido pelo WhatsApp
             </button>
        </section>

        <footer class="text-center mt-12 pt-6 border-t border-gray-400 text-gray-100 text-sm">
             <p class="font-semibold">Drogaria Ultra Popular - Belford Roxo - Unidade Vasco</p>
             <p>Endere√ßo: Av. Governador Leonel de Moura Brizola, Lote 10 Quadra A</p>
             <p class="mt-4 text-xs text-gray-200">Ofertas v√°lidas enquanto durarem os estoques. Imagens meramente ilustrativas.</p>
        </footer>
    </div>

    <script>
        const WHATSAPP_NUMBER = "5521975974372";
        const paymentSelect = document.getElementById('payment-method');
        const trocoSection = document.getElementById('troco-section');
        paymentSelect.addEventListener('change', function() {
            trocoSection.classList.toggle('hidden', this.value !== 'Dinheiro');
            if (this.value !== 'Dinheiro') {
                document.getElementById('troco-para').value = '';
            }
        });

        const totalDisplayElement = document.getElementById('total-pedido-valor');

        function calcularEAtualizarTotal() {
            let totalGeral = 0;
            document.querySelectorAll('.product-quantity').forEach(input => {
                const quantidade = parseInt(input.value) || 0;
                if (quantidade > 0) {
                    const productItemDiv = input.closest('.product-item');
                    const priceElement = productItemDiv.querySelector('p[data-product-price]');
                    if (priceElement) {
                        const precoUnitario = parseFloat(priceElement.getAttribute('data-product-price')) || 0;
                        totalGeral += quantidade * precoUnitario;
                    }
                }
            });
            totalDisplayElement.textContent = `R$ ${totalGeral.toFixed(2).replace('.', ',')}`;
        }

        function inicializarControlesQuantidade() {
            document.querySelectorAll('.product-item').forEach(itemContainer => {
                const inputQty = itemContainer.querySelector('.product-quantity');
                const btnMinus = itemContainer.querySelector('.quantity-minus');
                const btnPlus = itemContainer.querySelector('.quantity-plus');

                if (!inputQty || !btnMinus || !btnPlus) return;

                btnMinus.addEventListener('click', () => {
                    let currentValue = parseInt(inputQty.value) || 0;
                    if (currentValue > 0) {
                        inputQty.value = currentValue - 1;
                        inputQty.dispatchEvent(new Event('input', { bubbles: true }));
                    }
                });

                btnPlus.addEventListener('click', () => {
                    let currentValue = parseInt(inputQty.value) || 0;
                    inputQty.value = currentValue + 1;
                    inputQty.dispatchEvent(new Event('input', { bubbles: true }));
                });
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.product-quantity').forEach(input => {
                 input.addEventListener('input', calcularEAtualizarTotal);
            });
            calcularEAtualizarTotal();
            inicializarControlesQuantidade();
        });

        function enviarPedidoWhatsApp() {
            let mensagem = "üõí *Novo Pedido - Drogaria Ultra Popular* üõí\n\n";
            mensagem += "*Itens Selecionados (Lista):*\n";
            let algumItemSelecionado = false;
            let erroValidacaoProduto = null;
            let subTotalCalculado = 0;

            const produtosInputsParaMensagem = document.querySelectorAll('.product-quantity');
            produtosInputsParaMensagem.forEach(input => {
                const quantidade = parseInt(input.value);
                if (quantidade > 0) {
                    algumItemSelecionado = true;
                    const productItemDiv = input.closest('.product-item');
                    const productName = productItemDiv.querySelector('h3[data-product-name]').getAttribute('data-product-name');
                    const productPriceElement = productItemDiv.querySelector('p[data-product-price]');
                    const productPrice = parseFloat(productPriceElement.getAttribute('data-product-price')) || 0;
                    let productSize = '';
                    const sizeSelect = productItemDiv.querySelector('.product-size');
                    if (sizeSelect) {
                        productSize = sizeSelect.value;
                        if (!productSize) {
                            erroValidacaoProduto = `Por favor, selecione o tamanho para: ${productName}`;
                            sizeSelect.classList.add('border-red-500', 'ring-red-500');
                            sizeSelect.focus();
                            return;
                        } else {
                             sizeSelect.classList.remove('border-red-500', 'ring-red-500');
                        }
                    }
                     subTotalCalculado += quantidade * productPrice;
                    let itemString = `- ${quantidade}x ${productName}`;
                    if (productSize) itemString += ` - Tam ${productSize}`;
                    itemString += ` (R$ ${productPrice.toFixed(2).replace('.', ',')})\n`;
                    mensagem += itemString;
                }
            });

            if (erroValidacaoProduto) {
                alert(erroValidacaoProduto); return;
            }
            const outrosProdutos = document.getElementById('other-products').value.trim();
            if (!algumItemSelecionado && !outrosProdutos) {
                alert("Por favor, selecione a quantidade de pelo menos um produto da lista ou descreva o produto que deseja no campo adicional.");
                if (!algumItemSelecionado && document.querySelector('.product-quantity')) {
                     document.querySelector('.product-quantity').focus();
                } else if (document.getElementById('other-products')) {
                     document.getElementById('other-products').focus();
                }
                return;
            }
            if (algumItemSelecionado){
                 mensagem += `\n*Subtotal (Itens da Lista): R$ ${subTotalCalculado.toFixed(2).replace('.', ',')}*\n`;
            }

            mensagem += "\n*Dados do Cliente:*\n";
            const nome = document.getElementById('customer-name').value.trim();
            const telefone = document.getElementById('customer-phone').value.trim();
            const rua = document.getElementById('customer-street').value.trim();
            const numero = document.getElementById('customer-number').value.trim();
            const complemento = document.getElementById('customer-complement').value.trim();
            const bairro = document.getElementById('customer-neighborhood').value.trim();
            const referencia = document.getElementById('customer-reference').value.trim();
            const pagamento = document.getElementById('payment-method').value;
            const troco = document.getElementById('troco-para').value.trim();

            if (!nome || !telefone || !rua || !numero || !bairro || !pagamento) {
                alert("Por favor, preencha todos os campos obrigat√≥rios (*) de Nome, Telefone, Endere√ßo e Forma de Pagamento.");
                 if (!nome) document.getElementById('customer-name').focus();
                 else if (!telefone) document.getElementById('customer-phone').focus();
                 else if (!rua) document.getElementById('customer-street').focus();
                 else if (!numero) document.getElementById('customer-number').focus();
                 else if (!bairro) document.getElementById('customer-neighborhood').focus();
                 else if (!pagamento) document.getElementById('payment-method').focus();
                return;
            }
            mensagem += `Nome: ${nome}\n`;
            mensagem += `Telefone: ${telefone}\n`;
            mensagem += `Endere√ßo: ${rua}, N¬∫ ${numero}`;
            if (complemento) mensagem += `, ${complemento}`;
            mensagem += ` - Bairro: ${bairro}\n`;
            if (referencia) mensagem += `Refer√™ncia: ${referencia}\n`;
            if (outrosProdutos) {
                mensagem += "\n*Produtos Adicionais Solicitados (Verificar disponibilidade/pre√ßo):*\n";
                mensagem += `${outrosProdutos}\n`;
            }
            mensagem += `\n*Pagamento:* ${pagamento}\n`;
            if (pagamento === 'Dinheiro' && troco) mensagem += `Precisa de troco para: ${troco}\n`;
            mensagem += "\n*Aguardando confirma√ß√£o.*";

            const encodedMessage = encodeURIComponent(mensagem);
            const whatsappURL = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;
            window.open(whatsappURL, '_blank');
        }
    </script>

</body>
</html>
